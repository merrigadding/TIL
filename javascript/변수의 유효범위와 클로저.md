# 변수의 유효범위와 클로저
자바스크립트는 함수 지향 언어이다. 이런 특징은 개발자에가 많은 자유를 준다. 함수를 동적으로 생성할 수 있고, 생성한 함수를 다른 함수에
인수로 넘길 수 있으며, 생성된 곳이 아닌 곳에서 함수를 호출할 수도 있기 때문이다.

### 코드블록
코드블록 {...} 안에서 선언한 변수는 블록 안에서만 사용할 수 있다.
```java
{
  let a = '홍길동'
}
console.log(a) // 에러
```

if, for, while 등에서더 마찬가지로 {...} 안에서 선언한 변수는 오직 블록 안에서만 접근이 가능하다.
```java
if(true) {
  let a = '홍길동';
  console.log(a); // 홍길동
}
console.log(a); // 에러
```

### 중첩 함수
함수 내부에서 선언한 함수는 '중첩 함수' 라고 부른다.
자바스크립트에선 손쉽게 중첩 함수를 만들 수 있다.
```java
function sayHiBye(firstName, lastName) {

  // 헬퍼(helper) 중첩 함수
  function getFullName() {
    return firstName + " " + lastName;
  }

  alert( "Hello, " + getFullName() );
  alert( "Bye, " + getFullName() );

}
```

# 렉시컬 환경

## 1. 변수
자바스크립트에선 실행 중인 함수, 코드블록 {...}, 스크립트 전체는 렉시컬 환경이라 불리는 내부 숨김 연관 객체를 갖는다.<br>
렉시컬 환경 객체는 두 부분으로 구성된다.
1. 환경레코드 - 모든 지역 변수를 프로퍼티로 저장하고 있는객체. this값과 같은 기타 정보도 여기에 저장된다.
2. 외부 렉시컬 환경에 대한 참조 - 외부 코드와 연결됨.

*'변수'는 특수 내부 객체인 환경 레코드의 프로퍼티일 뿐이다. 변수를 가져오거나 변경하는것은 환경 레코드의 프로퍼티를 가져오거나 변경
함을 의미한다.*

## 2. 함수 선언문
함수는 변수와 마찬가지로 값이다.<br>
다만 함수 선언문으로 선언한 함수는 일반 변수와는 달리 바로 초기화 된다는 점에서 차이가 있다.<br>
선언되기 전에도 함수를 사용할 수 있는 것은 바로 이 이유이다.

## 3. 내부와 외부 렉시컬 환경
함수를 호출해 실행하면 새로운 렉시컬 환경이 자동으로 만들어진다. 이 렉시컬 환경엔 함수 호출 시 넘겨받은 매개변수와 함수의 지역변수가 저장된다.<br>
함수가 호출 중인 동안엔 호출중인 함수를 위한 내부 렉시컬 환경과 내부 렉시컬 환경이 가리키는 외부 렉시컬 환경을 갖게된다.<br>
내부 렉시컬 환경은 현재 실행중인 함수에 상응하고 환경 레코드엔 인자로 받은 프로퍼티가 존재한다.<br>
내부 렉시컬 환경에서 원하는 변수를 찾지 못하면 전역 렉시컬 환경으로 확장될 때까지 반복된다.

## 4. 함수를 반환하는 함수
모든 함수는 함수가 생성된 곳의 렉시컬 환경을 기억한다. 함수는 [[Environment]] 라 불리는 숨김 프로퍼티를 갖는데, 여기에 함수가 만들어진
곳의 렉시컬 환경에 대한 참조가 저장된다.

# 클로저
클로저는 외부 변수를 기억하고 외부 변수에 접근할 수 있는 함수이다. 자바스크립트 모든 함수가 클로저이다. 함수에는 숨김 프로퍼티[[Environment]]가 있는데
이 프로퍼티에는 자신이 태어난 곳(렉시컬 환경)을 저장해주는 프로퍼티이다. 그래서 외부 변수에도 접근할 수 있으므로 클로저 함수이다.


